
# Live loop: Beat01 -> simple beat
playbeat01 = 0
beat01_started = true
live_loop :beat01 do
  stop if playbeat01 == 0
  #nv = sync "/osc/beat01" unless beat01_started
  if(!beat01_started)
    beat01_started = true;
  end
  sample :bd_haus, rate: 1
  sleep 1
end

# Live loop: Beat02 -> classic drum beat
set :playbeat02, 0
beat02_started = false;

live_loop :startbeat02 do
  nv = sync "/osc/beat02/start" unless beat02_started
  beat02_started = true if !beat02_started
  set :playbeat02, 1
  puts "Start beat02"
  sleep 0.5
end

live_loop :stopbeat02 do
  nv = sync "/osc/beat02/stop" #unless !beat02_started
  beat02_started = false if beat02_started
  set :playbeat02, 0
  puts "Stop beat02"
  sleep 0.5
end

live_loop :beat02 do
  sample :loop_amen, beat_stretch: 2 if get(:playbeat02) == 1
  sleep 2
end